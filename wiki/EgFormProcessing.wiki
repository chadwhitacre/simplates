=Example 4: Processing a Form=

This example introduces:

  # `POST`ing to yourself, a common pattern with simplates
  # accessing the `request` object from a simplate

For this example, we will implement a simple contact form.


=== settings.py ===

{{{
SIMPLATE_DIRS = (
    '/path/to/simplates',
)
TEMPLATE_CONTEXT_PROCESSORS = (
    'django.core.context_processors.auth',
    'django.core.context_processors.debug',
    'django.core.context_processors.i18n',
    'django.core.context_processors.media',
    'django.core.context_processors.request'
)
}}}

Note that we have enabled [http://docs.djangoproject.com/en/dev/ref/templates/api/#django-core-context-processors-request the "request" context processor] (the others are [http://docs.djangoproject.com/en/dev/ref/templates/api/#id1 the defaults], which we don't want to lose). We need the `request` context processor in order to access the `request` object from our simplate later on.


=== urls.py ===

{{{
from django.conf.urls.defaults import *
from simplates.views import direct_to_simplate


urlpatterns = patterns('',
    (r'^contact.html$', direct_to_simplate),
)
}}}


=== simplate at /path/to/simplates/contact.html ===

By now, you should know that a simplate has [EgRedirect up to three sections], separated by this line:

{{{
#<!--===BREAK===-->
}}}

The sections are:

  # *import*--Python, run once
  # *view*--Python, run every request
  # *template*--Django template

Here is the content of our simplate for this example:

{{{
from django.forms import *

#@: BUILD FORM HERE


#<!--===BREAK===-->

#@: PROCESS FORM HERE


#<!--===BREAK===-->
<form action="{{ request.META.PATH_INFO }}" method="POST">
{{ myform }}
</form>
}}}


== Next Example: [EgImageGeneration Generating an Image Dynamically] ==